var _0x5626=['[flic]\x20Completed\x20with\x20result:\x20','[flic]\x20Your\x20new\x20button\x20is\x20','Button\x20Pairing\x20Completed\x20-\x20Address\x20','Button\x20Pairing\x20Failed','address','[flic]\x20Unpairing\x20Button\x20','deleteButton','exports','./fliclib','execSync','publish','flic/client/','stringify','[flic]\x20Sending\x20','\x20To\x20','FlicConnectionChannel','[flic]\x20Listening\x20For\x20Events\x20From\x20Button\x20','buttonSingleOrDoubleClickOrHold','wasQueued','\x20seconds\x20ago','ButtonSingleClick','ButtonTripleClick','Button','ButtonDoubleClick','[flic]\x20Initialising\x20FLIC\x20Server','/usr/local/bin/flicd\x20-f\x20/var/local/flicd.db\x20-d','FlicClient','localhost','error','[flic]\x20Unable\x20To\x20Connect\x20To\x20Local\x20FLIC\x20Server','ready','bdAddrOfVerifiedButtons','forEach','newVerifiedButton','getInfo','Pong','[flic]\x20Pairing\x20Process\x20Started','foundPrivateButton','[flic]\x20Your\x20button\x20is\x20private.\x20Hold\x20down\x20for\x2010\x20seconds\x20to\x20make\x20it\x20public.','Message','Button\x20Being\x20Paired\x20-\x20Please\x20Hold\x20Button\x20Down\x20For\x2010\x20Seconds','Button\x20Now\x20Connecting','[flic]\x20Button\x20connected.\x20Now\x20verifying\x20and\x20pairing...','Button\x20Connected\x20-\x20Now\x20Verifying\x20And\x20Pairing','completed'];(function(_0x541657,_0x52411e){var _0x31a236=function(_0x257bc1){while(--_0x257bc1){_0x541657['push'](_0x541657['shift']());}};var _0x964751=function(){var _0x2842b7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x85c46d,_0x4a6f33,_0x13427c,_0x390c37){_0x390c37=_0x390c37||{};var _0x1f05b6=_0x4a6f33+'='+_0x13427c;var _0x1c3041=0x0;for(var _0x1c3041=0x0,_0x506f12=_0x85c46d['length'];_0x1c3041<_0x506f12;_0x1c3041++){var _0x32d8c5=_0x85c46d[_0x1c3041];_0x1f05b6+=';\x20'+_0x32d8c5;var _0x1c3eb0=_0x85c46d[_0x32d8c5];_0x85c46d['push'](_0x1c3eb0);_0x506f12=_0x85c46d['length'];if(_0x1c3eb0!==!![]){_0x1f05b6+='='+_0x1c3eb0;}}_0x390c37['cookie']=_0x1f05b6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x45e8c9,_0x302940){_0x45e8c9=_0x45e8c9||function(_0x2d2233){return _0x2d2233;};var _0x249cdd=_0x45e8c9(new RegExp('(?:^|;\x20)'+_0x302940['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x31a648=function(_0x5b76d7,_0x3051da){_0x5b76d7(++_0x3051da);};_0x31a648(_0x31a236,_0x52411e);return _0x249cdd?decodeURIComponent(_0x249cdd[0x1]):undefined;}};var _0x3576b7=function(){var _0x1054c7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1054c7['test'](_0x2842b7['removeCookie']['toString']());};_0x2842b7['updateCookie']=_0x3576b7;var _0x1360a6='';var _0x16bedc=_0x2842b7['updateCookie']();if(!_0x16bedc){_0x2842b7['setCookie'](['*'],'counter',0x1);}else if(_0x16bedc){_0x1360a6=_0x2842b7['getCookie'](null,'counter');}else{_0x2842b7['removeCookie']();}};_0x964751();}(_0x5626,0x1ca));var _0x25b7=function(_0x3562b5,_0x22dabc){_0x3562b5=_0x3562b5-0x0;var _0x54d52d=_0x5626[_0x3562b5];return _0x54d52d;};var _0x51ee45=function(){var _0x200d48=!![];return function(_0x3233d1,_0x23f20c){var _0x117f0a=_0x200d48?function(){if(_0x23f20c){var _0x47fbef=_0x23f20c['apply'](_0x3233d1,arguments);_0x23f20c=null;return _0x47fbef;}}:function(){};_0x200d48=![];return _0x117f0a;};}();var _0x567cc2=_0x51ee45(this,function(){var _0xc58bc8=function(){return'\x64\x65\x76';},_0x2adcf8=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x45c6b5=function(){var _0x555b3b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x555b3b['\x74\x65\x73\x74'](_0xc58bc8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x45c029=function(){var _0x27c536=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x27c536['\x74\x65\x73\x74'](_0x2adcf8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1fcaa1=function(_0x337278){var _0xc99e91=~-0x1>>0x1+0xff%0x0;if(_0x337278['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xc99e91)){_0x293fbc(_0x337278);}};var _0x293fbc=function(_0x4c0c05){var _0x595b1e=~-0x4>>0x1+0xff%0x0;if(_0x4c0c05['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x595b1e){_0x1fcaa1(_0x4c0c05);}};if(!_0x45c6b5()){if(!_0x45c029()){_0x1fcaa1('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1fcaa1('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1fcaa1('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x567cc2();const COMMON=require('../common');const FLIC=require(_0x25b7('0x0'));const execSync=COMMON[_0x25b7('0x1')];var clickTimers={};function publish_MQTT(_0x447e75,_0x562cba,_0x5d67f5){var _0x562cba=ENV['mqtt'][_0x25b7('0x2')]+_0x25b7('0x3')+_0x562cba;var _0x2eebec=JSON[_0x25b7('0x4')](_0x5d67f5);print(_0x25b7('0x5')+_0x2eebec+_0x25b7('0x6')+_0x562cba);_0x447e75[_0x25b7('0x2')](_0x562cba,_0x2eebec);}function listen_button(_0x52e239,_0x42afe2,_0x3b1dab){var _0x5c1c4f=new FLIC[(_0x25b7('0x7'))](_0x3b1dab);_0x42afe2['addConnectionChannel'](_0x5c1c4f);print(_0x25b7('0x8')+_0x3b1dab);_0x5c1c4f['on'](_0x25b7('0x9'),function(_0x1ec11c,_0x256cf3,_0x5a6887){print(_0x3b1dab+'\x20'+_0x1ec11c+'\x20'+(_0x256cf3?_0x25b7('0xa'):'notQueued')+'\x20'+_0x5a6887+_0x25b7('0xb'));if(clickTimers[_0x3b1dab]){clearTimeout(clickTimers[_0x3b1dab]);clickTimers[_0x3b1dab]=![];if(_0x1ec11c==_0x25b7('0xc')){_0x1ec11c=_0x25b7('0xd');}publish_MQTT(_0x52e239,_0x25b7('0xe'),{'address':_0x3b1dab,'click':_0x1ec11c});}else{if(_0x1ec11c==_0x25b7('0xf')){clickTimers[_0x3b1dab]=setTimeout(function(){clickTimers[_0x3b1dab]=![];publish_MQTT(_0x52e239,_0x25b7('0xe'),{'address':_0x3b1dab,'click':'ButtonDoubleClick'});},0x2bc);}else{publish_MQTT(_0x52e239,_0x25b7('0xe'),{'address':_0x3b1dab,'click':_0x1ec11c});}}});_0x5c1c4f['on']('connectionStatusChanged',function(_0x1868c4,_0xd3fbf2){print(_0x3b1dab+'\x20'+_0x1868c4+(_0x1868c4=='Disconnected'?'\x20'+_0xd3fbf2:''));publish_MQTT(_0x52e239,_0x25b7('0xe'),{'address':_0x3b1dab,'state':_0x1868c4});});}function init(_0x27579f){print(_0x25b7('0x10'));execSync(_0x25b7('0x11'));var _0x4b1d40=new FLIC[(_0x25b7('0x12'))](_0x25b7('0x13'),0x15af);_0x4b1d40['on'](_0x25b7('0x14'),function(_0x49c221){error(_0x25b7('0x15'));});_0x4b1d40['on'](_0x25b7('0x16'),function(){_0x4b1d40['getInfo'](function(_0x1c2a6b){_0x1c2a6b[_0x25b7('0x17')][_0x25b7('0x18')](function(_0xb9e536){listen_button(_0x27579f,_0x4b1d40,_0xb9e536);});_0x4b1d40['on'](_0x25b7('0x19'),function(_0x6ba929){listen_button(_0x27579f,_0x4b1d40,_0x6ba929);});});});return _0x4b1d40;}function server_ping(_0x23c04a,_0xccad90,_0x1e3bda){_0xccad90[_0x25b7('0x1a')](function(_0x5ce60e){publish_MQTT(_0x23c04a,_0x25b7('0x1b'),{'Buttons':_0x5ce60e[_0x25b7('0x17')]});});}function server_pair(_0xf3ba26,_0x863fc3,_0x246c21){print(_0x25b7('0x1c'));var _0x482a7b=FLIC['FlicScanWizard'];var _0x1c7893=new _0x482a7b();_0x1c7893['on'](_0x25b7('0x1d'),function(){print(_0x25b7('0x1e'));publish_MQTT(_0xf3ba26,_0x25b7('0x1f'),{'message':_0x25b7('0x20')});});_0x1c7893['on']('foundPublicButton',function(_0x5dc195,_0x19289c){print('[flic]\x20Found\x20public\x20button\x20'+_0x5dc195+'\x20('+_0x19289c+').\x20Now\x20connecting...');publish_MQTT(_0xf3ba26,'Message',{'message':_0x25b7('0x21')});});_0x1c7893['on']('buttonConnected',function(_0x349959,_0x28b56d){print(_0x25b7('0x22'));publish_MQTT(_0xf3ba26,_0x25b7('0x1f'),{'message':_0x25b7('0x23')});});_0x1c7893['on'](_0x25b7('0x24'),function(_0x361fad,_0x5a6a0e,_0x4e2cb4){print(_0x25b7('0x25')+_0x361fad);if(_0x361fad=='WizardSuccess'){print(_0x25b7('0x26')+_0x5a6a0e);publish_MQTT(_0xf3ba26,_0x25b7('0x1f'),{'message':_0x25b7('0x27')+_0x5a6a0e});server_ping(_0xf3ba26,_0x863fc3);}else{publish_MQTT(_0xf3ba26,_0x25b7('0x1f'),{'message':_0x25b7('0x28')});}});_0x863fc3['addScanWizard'](_0x1c7893);}function server_unpair(_0x4ea280,_0x5495ed,_0x38f722){if(_0x38f722[_0x25b7('0x29')]){print(_0x25b7('0x2a')+_0x38f722[_0x25b7('0x29')]);_0x5495ed[_0x25b7('0x2b')](_0x38f722[_0x25b7('0x29')]);server_ping(_0x4ea280,_0x5495ed);}}function server_reset(_0x314a59,_0x1ac5f9,_0x345de3){_0x1ac5f9[_0x25b7('0x1a')](function(_0x2c9c6d){_0x2c9c6d['bdAddrOfVerifiedButtons'][_0x25b7('0x18')](function(_0x115269){_0x1ac5f9['deleteButton'](_0x115269);});server_ping(_0x314a59,_0x1ac5f9);});}module[_0x25b7('0x2c')]={'init':init,'commands':{'server_Ping':server_ping,'server_Pair':server_pair,'server_Unpair':server_unpair,'server_Reset':server_reset}};