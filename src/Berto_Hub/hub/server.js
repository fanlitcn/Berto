var _0x3bfa=['slice','berto-hub','[berto]\x20Reading\x20In\x20Configuration','url','mqtt','username','password','flic','servers','homekit','[berto]\x20Unable\x20To\x20Connect\x20To\x20','exit','connect','[berto]\x20Connected\x20To\x20MQTT\x20Broker','subscribe','topic','match','/(.+)/server/(.+)','publish','[berto]\x20Subscribed\x20To\x20','client','init','message','[berto]\x20Message\x20Received\x20On\x20Topic\x20','commands','[berto]\x20Command\x20','\x20Does\x20Not\x20Exist','[berto]\x20','\x20-\x20','[berto]\x20Command\x20Not\x20Specified\x20In\x20','\x20Topic','[berto]\x20Invalid\x20Topic','./common','minimist','print','error','[berto]\x20Loading\x20Modules','node-getmac','argv'];(function(_0x4299c4,_0x4388d1){var _0xdb5c6d=function(_0x455ba3){while(--_0x455ba3){_0x4299c4['push'](_0x4299c4['shift']());}};var _0x4b36a5=function(){var _0x1cda2f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xc19400,_0x53d701,_0x2ad7b1,_0x119ec6){_0x119ec6=_0x119ec6||{};var _0x95246b=_0x53d701+'='+_0x2ad7b1;var _0x186eaf=0x0;for(var _0x186eaf=0x0,_0x13b874=_0xc19400['length'];_0x186eaf<_0x13b874;_0x186eaf++){var _0x5cebc6=_0xc19400[_0x186eaf];_0x95246b+=';\x20'+_0x5cebc6;var _0x7f7794=_0xc19400[_0x5cebc6];_0xc19400['push'](_0x7f7794);_0x13b874=_0xc19400['length'];if(_0x7f7794!==!![]){_0x95246b+='='+_0x7f7794;}}_0x119ec6['cookie']=_0x95246b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x483678,_0x1a7ca3){_0x483678=_0x483678||function(_0x394b5d){return _0x394b5d;};var _0x2cf91c=_0x483678(new RegExp('(?:^|;\x20)'+_0x1a7ca3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x387ae0=function(_0x51983e,_0x2abbba){_0x51983e(++_0x2abbba);};_0x387ae0(_0xdb5c6d,_0x4388d1);return _0x2cf91c?decodeURIComponent(_0x2cf91c[0x1]):undefined;}};var _0x2b17cb=function(){var _0x4450ec=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4450ec['test'](_0x1cda2f['removeCookie']['toString']());};_0x1cda2f['updateCookie']=_0x2b17cb;var _0x458b7a='';var _0x2e7993=_0x1cda2f['updateCookie']();if(!_0x2e7993){_0x1cda2f['setCookie'](['*'],'counter',0x1);}else if(_0x2e7993){_0x458b7a=_0x1cda2f['getCookie'](null,'counter');}else{_0x1cda2f['removeCookie']();}};_0x4b36a5();}(_0x3bfa,0x17f));var _0x2727=function(_0x551f6a,_0x658074){_0x551f6a=_0x551f6a-0x0;var _0x45d694=_0x3bfa[_0x551f6a];return _0x45d694;};var _0x104b67=function(){var _0x454e4b=!![];return function(_0x253275,_0x4e698b){var _0x3b5d32=_0x454e4b?function(){if(_0x4e698b){var _0x33d4b1=_0x4e698b['apply'](_0x253275,arguments);_0x4e698b=null;return _0x33d4b1;}}:function(){};_0x454e4b=![];return _0x3b5d32;};}();var _0x34c2f4=_0x104b67(this,function(){var _0x12f36c=function(){return'\x64\x65\x76';},_0x2de933=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x10d000=function(){var _0x473f38=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x473f38['\x74\x65\x73\x74'](_0x12f36c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x53fab1=function(){var _0x145071=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x145071['\x74\x65\x73\x74'](_0x2de933['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2cdb23=function(_0x53150c){var _0x54f1e9=~-0x1>>0x1+0xff%0x0;if(_0x53150c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x54f1e9)){_0x109fb8(_0x53150c);}};var _0x109fb8=function(_0x133db1){var _0x24ff10=~-0x4>>0x1+0xff%0x0;if(_0x133db1['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x24ff10){_0x2cdb23(_0x133db1);}};if(!_0x10d000()){if(!_0x53fab1()){_0x2cdb23('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2cdb23('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2cdb23('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x34c2f4();const COMMON=require(_0x2727('0x0'));const minimist=COMMON[_0x2727('0x1')];const print=COMMON[_0x2727('0x2')];const error=COMMON[_0x2727('0x3')];print(_0x2727('0x4'));const MQTT=require('mqtt');const MAC=require(_0x2727('0x5'));const args=minimist(process[_0x2727('0x6')][_0x2727('0x7')](0x2));const DEBUG=args['d'];ENV={'topic':_0x2727('0x8'),'uuid':MAC,'mqtt':{'url':'mqtt://localhost:1883'},'servers':{'berto':{}}};print(_0x2727('0x9'));if(args[_0x2727('0xa')]){ENV['mqtt'][_0x2727('0xa')]=args['url'];}if(args['u']){ENV[_0x2727('0xb')][_0x2727('0xc')]=args['u'];}if(args['P']){ENV[_0x2727('0xb')][_0x2727('0xd')]=args['P'];}if(args[_0x2727('0xe')]){ENV[_0x2727('0xf')][_0x2727('0xe')]={};}if(args[_0x2727('0x10')]){ENV['servers'][_0x2727('0x10')]={'storage':args['homekit']};}print('[berto]\x20Attempting\x20Connection\x20To\x20'+ENV[_0x2727('0xb')]['url']);var mqtt_client=MQTT['connect'](ENV[_0x2727('0xb')][_0x2727('0xa')],{'username':ENV['mqtt'][_0x2727('0xc')],'password':ENV[_0x2727('0xb')]['password']});mqtt_client['on'](_0x2727('0x3'),function(_0x410037){error(_0x2727('0x11')+ENV[_0x2727('0xb')][_0x2727('0xa')]);process[_0x2727('0x12')](0x1);});mqtt_client['on'](_0x2727('0x13'),function(_0x46db00){print(_0x2727('0x14'));ENV[_0x2727('0xb')][_0x2727('0x15')]=ENV[_0x2727('0x16')]+'/+/server/#';ENV[_0x2727('0xb')][_0x2727('0x17')]=ENV[_0x2727('0x16')]+_0x2727('0x18');ENV['mqtt'][_0x2727('0x19')]=ENV[_0x2727('0x16')]+'/';mqtt_client[_0x2727('0x15')](ENV[_0x2727('0xb')]['subscribe'],function(_0x2be13d){if(_0x2be13d){error(_0x2be13d);process['exit'](0x1);}print(_0x2727('0x1a')+ENV['mqtt'][_0x2727('0x15')]);for(var _0x692aeb in ENV[_0x2727('0xf')]){try{ENV[_0x2727('0xf')][_0x692aeb]=require('./'+_0x692aeb);ENV[_0x2727('0xf')][_0x692aeb][_0x2727('0x1b')]=ENV[_0x2727('0xf')][_0x692aeb][_0x2727('0x1c')](mqtt_client);}catch(_0x4e302a){error(_0x4e302a);delete ENV[_0x2727('0xf')][_0x692aeb];}}mqtt_client['on'](_0x2727('0x1d'),function(_0x54c2c5,_0x835e8d){print(_0x2727('0x1e')+_0x54c2c5);var _0x4768c6=_0x54c2c5[_0x2727('0x17')](ENV[_0x2727('0xb')][_0x2727('0x17')]);if(_0x4768c6&&ENV[_0x2727('0xf')][_0x4768c6[0x1]]){var _0x49db81=_0x4768c6[0x2];if(_0x49db81){var _0x692aeb=ENV[_0x2727('0xf')][_0x4768c6[0x1]];var _0x2b756a=_0x692aeb[_0x2727('0x1f')];try{var _0x6ce082=JSON['parse'](_0x835e8d);var _0x185e33='server_'+_0x49db81;if(_0x2b756a[_0x185e33]){print('[berto]\x20Executing\x20'+_0x49db81);_0x2b756a[_0x185e33](mqtt_client,_0x692aeb[_0x2727('0x1b')],_0x6ce082);}else{error(_0x2727('0x20')+_0x49db81+_0x2727('0x21'));}}catch(_0x73f292){error(_0x2727('0x22')+_0x73f292+_0x2727('0x23')+_0x835e8d);}}else{print(_0x2727('0x24')+_0x54c2c5+_0x2727('0x25'));}}else{error(_0x2727('0x26'));}});});});