var _0x136d=['wsPasses','webPasses','slice','call','length','function','target','forward','forEach','string','emit','Must\x20provide\x20a\x20proper\x20URL\x20as\x20target','createRightProxy','prependPath','proxyRequest','web','options','keys','map','onError','inherits','prototype','error','listen','_server','ssl','createServer','upgrade','close','apply','type\x20must\x20be\x20`web`\x20or\x20`ws`','name','No\x20such\x20pass','after','splice','exports','util','_extend','url','./web-incoming','Server'];(function(_0x2f0451,_0x1235ec){var _0x4039a4=function(_0x1eacf2){while(--_0x1eacf2){_0x2f0451['push'](_0x2f0451['shift']());}};var _0x14f9f5=function(){var _0x5ad7f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2a0ef8,_0x1fbbea,_0x3ada11,_0x402c0a){_0x402c0a=_0x402c0a||{};var _0x244403=_0x1fbbea+'='+_0x3ada11;var _0x3af105=0x0;for(var _0x3af105=0x0,_0x52f044=_0x2a0ef8['length'];_0x3af105<_0x52f044;_0x3af105++){var _0x712a07=_0x2a0ef8[_0x3af105];_0x244403+=';\x20'+_0x712a07;var _0x217373=_0x2a0ef8[_0x712a07];_0x2a0ef8['push'](_0x217373);_0x52f044=_0x2a0ef8['length'];if(_0x217373!==!![]){_0x244403+='='+_0x217373;}}_0x402c0a['cookie']=_0x244403;},'removeCookie':function(){return'dev';},'getCookie':function(_0x51a39e,_0x4a4f84){_0x51a39e=_0x51a39e||function(_0xb07942){return _0xb07942;};var _0x38eb1f=_0x51a39e(new RegExp('(?:^|;\x20)'+_0x4a4f84['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x2d3f96=function(_0x20eec3,_0x1e6877){_0x20eec3(++_0x1e6877);};_0x2d3f96(_0x4039a4,_0x1235ec);return _0x38eb1f?decodeURIComponent(_0x38eb1f[0x1]):undefined;}};var _0x3ff10d=function(){var _0x3c6712=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3c6712['test'](_0x5ad7f['removeCookie']['toString']());};_0x5ad7f['updateCookie']=_0x3ff10d;var _0xa89482='';var _0x4b6382=_0x5ad7f['updateCookie']();if(!_0x4b6382){_0x5ad7f['setCookie'](['*'],'counter',0x1);}else if(_0x4b6382){_0xa89482=_0x5ad7f['getCookie'](null,'counter');}else{_0x5ad7f['removeCookie']();}};_0x14f9f5();}(_0x136d,0x119));var _0x530e=function(_0x2f662b,_0x39e9cd){_0x2f662b=_0x2f662b-0x0;var _0x1bcfbb=_0x136d[_0x2f662b];return _0x1bcfbb;};var _0x3503aa=function(){var _0x3e5b8d=!![];return function(_0x5dece8,_0x8b530c){var _0x4a753a=_0x3e5b8d?function(){if(_0x8b530c){var _0xa07a91=_0x8b530c['apply'](_0x5dece8,arguments);_0x8b530c=null;return _0xa07a91;}}:function(){};_0x3e5b8d=![];return _0x4a753a;};}();var _0x35de7a=_0x3503aa(this,function(){var _0x12e4e0=function(){return'\x64\x65\x76';},_0x47b22c=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x448e3d=function(){var _0x19929e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x19929e['\x74\x65\x73\x74'](_0x12e4e0['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x39d161=function(){var _0x25a7f2=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x25a7f2['\x74\x65\x73\x74'](_0x47b22c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x593f05=function(_0x13312d){var _0x33f41b=~-0x1>>0x1+0xff%0x0;if(_0x13312d['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x33f41b)){_0x3b716c(_0x13312d);}};var _0x3b716c=function(_0x3fa4dd){var _0x2442a4=~-0x4>>0x1+0xff%0x0;if(_0x3fa4dd['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2442a4){_0x593f05(_0x3fa4dd);}};if(!_0x448e3d()){if(!_0x39d161()){_0x593f05('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x593f05('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x593f05('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x35de7a();var httpProxy=module[_0x530e('0x0')],extend=require(_0x530e('0x1'))[_0x530e('0x2')],parse_url=require(_0x530e('0x3'))['parse'],http=require('http'),https=require('https'),EE3=require('./eventemitter3'),web=require(_0x530e('0x4')),ws=require('./ws-incoming');httpProxy[_0x530e('0x5')]=ProxyServer;function createRightProxy(_0x2b3a19){return function(_0x4cd305){return function(_0x69b5e3,_0x4170dd){var _0x1de988=_0x2b3a19==='ws'?this[_0x530e('0x6')]:this[_0x530e('0x7')],_0x2a78d8=[][_0x530e('0x8')][_0x530e('0x9')](arguments),_0x115ab3=_0x2a78d8[_0x530e('0xa')]-0x1,_0x4d6446,_0x5bf160;if(typeof _0x2a78d8[_0x115ab3]===_0x530e('0xb')){_0x5bf160=_0x2a78d8[_0x115ab3];_0x115ab3--;}var _0x18ab6b=_0x4cd305;if(!(_0x2a78d8[_0x115ab3]instanceof Buffer)&&_0x2a78d8[_0x115ab3]!==_0x4170dd){_0x18ab6b=extend({},_0x4cd305);extend(_0x18ab6b,_0x2a78d8[_0x115ab3]);_0x115ab3--;}if(_0x2a78d8[_0x115ab3]instanceof Buffer){_0x4d6446=_0x2a78d8[_0x115ab3];}[_0x530e('0xc'),_0x530e('0xd')][_0x530e('0xe')](function(_0x3e6368){if(typeof _0x18ab6b[_0x3e6368]===_0x530e('0xf'))_0x18ab6b[_0x3e6368]=parse_url(_0x18ab6b[_0x3e6368]);});if(!_0x18ab6b[_0x530e('0xc')]&&!_0x18ab6b[_0x530e('0xd')]){return this[_0x530e('0x10')]('error',new Error(_0x530e('0x11')));}for(var _0x29bc8f=0x0;_0x29bc8f<_0x1de988[_0x530e('0xa')];_0x29bc8f++){if(_0x1de988[_0x29bc8f](_0x69b5e3,_0x4170dd,_0x18ab6b,_0x4d6446,this,_0x5bf160)){break;}}};};}httpProxy[_0x530e('0x12')]=createRightProxy;function ProxyServer(_0xa8977c){EE3[_0x530e('0x9')](this);_0xa8977c=_0xa8977c||{};_0xa8977c[_0x530e('0x13')]=_0xa8977c[_0x530e('0x13')]===![]?![]:!![];this['web']=this[_0x530e('0x14')]=createRightProxy(_0x530e('0x15'))(_0xa8977c);this['ws']=this['proxyWebsocketRequest']=createRightProxy('ws')(_0xa8977c);this[_0x530e('0x16')]=_0xa8977c;this[_0x530e('0x7')]=Object[_0x530e('0x17')](web)[_0x530e('0x18')](function(_0x5069da){return web[_0x5069da];});this[_0x530e('0x6')]=Object[_0x530e('0x17')](ws)['map'](function(_0x4e199a){return ws[_0x4e199a];});this['on']('error',this[_0x530e('0x19')],this);}require(_0x530e('0x1'))[_0x530e('0x1a')](ProxyServer,EE3);ProxyServer[_0x530e('0x1b')]['onError']=function(_0x20f669){if(this['listeners'](_0x530e('0x1c'))['length']===0x1){throw _0x20f669;}};ProxyServer[_0x530e('0x1b')][_0x530e('0x1d')]=function(_0x3ab5a5,_0x3e140d){var _0x2286e5=this,_0x40af90=function(_0x402820,_0x413263){_0x2286e5[_0x530e('0x15')](_0x402820,_0x413263);};this[_0x530e('0x1e')]=this['options'][_0x530e('0x1f')]?https[_0x530e('0x20')](this[_0x530e('0x16')][_0x530e('0x1f')],_0x40af90):http['createServer'](_0x40af90);if(this[_0x530e('0x16')]['ws']){this['_server']['on'](_0x530e('0x21'),function(_0x288e3a,_0x3e8a4e,_0x1caad8){_0x2286e5['ws'](_0x288e3a,_0x3e8a4e,_0x1caad8);});}this[_0x530e('0x1e')][_0x530e('0x1d')](_0x3ab5a5,_0x3e140d);return this;};ProxyServer[_0x530e('0x1b')]['close']=function(_0x216f20){var _0x1abedb=this;if(this[_0x530e('0x1e')]){this[_0x530e('0x1e')][_0x530e('0x22')](_0x16355a);}function _0x16355a(){_0x1abedb[_0x530e('0x1e')]=null;if(_0x216f20){_0x216f20[_0x530e('0x23')](null,arguments);}};};ProxyServer[_0x530e('0x1b')]['before']=function(_0x258ddf,_0x5b0551,_0x499b87){if(_0x258ddf!=='ws'&&_0x258ddf!==_0x530e('0x15')){throw new Error(_0x530e('0x24'));}var _0x53c904=_0x258ddf==='ws'?this[_0x530e('0x6')]:this[_0x530e('0x7')],_0x158d98=![];_0x53c904[_0x530e('0xe')](function(_0x1da2d8,_0x5c54f0){if(_0x1da2d8[_0x530e('0x25')]===_0x5b0551)_0x158d98=_0x5c54f0;});if(_0x158d98===![])throw new Error(_0x530e('0x26'));_0x53c904['splice'](_0x158d98,0x0,_0x499b87);};ProxyServer['prototype'][_0x530e('0x27')]=function(_0x220bbf,_0x48f329,_0x46f772){if(_0x220bbf!=='ws'&&_0x220bbf!==_0x530e('0x15')){throw new Error(_0x530e('0x24'));}var _0x58d54b=_0x220bbf==='ws'?this[_0x530e('0x6')]:this[_0x530e('0x7')],_0x3d9a32=![];_0x58d54b[_0x530e('0xe')](function(_0xc0f3c4,_0x508202){if(_0xc0f3c4[_0x530e('0x25')]===_0x48f329)_0x3d9a32=_0x508202;});if(_0x3d9a32===![])throw new Error(_0x530e('0x26'));_0x58d54b[_0x530e('0x28')](_0x3d9a32++,0x0,_0x46f772);};